{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/browserify/node_modules/events/events.js","main.js","node_modules/whatwg-fetch/fetch.js","src/js/main.js","src/js/map.js","src/js/overlay.js","src/js/police-api.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","EventEmitter","this","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","prototype","defaultMaxListeners","setMaxListeners","isNaN","TypeError","emit","type","er","handler","len","args","listeners","error","arguments","Array","slice","apply","addListener","listener","m","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter",2,"self","normalizeName","name","String","test","toLowerCase","normalizeValue","value","Headers","headers","map","forEach","append","Object","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","Body","_initBody","_bodyInit","_bodyText","support","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","arrayBuffer","ArrayBuffer","get","set","rejected","then","text","decode","json","JSON","parse","normalizeMethod","method","upcased","toUpperCase","methods","indexOf","Request","input","options","url","credentials","mode","referrer","form","trim","split","bytes","shift","replace","join","decodeURIComponent","xhr","head","pairs","getAllResponseHeaders","header","Response","bodyInit","status","ok","statusText","fetch","values","getAll","has","hasOwnProperty","callback","thisArg","clone","response","redirectStatuses","redirect","RangeError","location","init","responseURL","getResponseHeader","request","XMLHttpRequest","responseText","open","withCredentials","responseType","setRequestHeader","send","polyfill",3,"_interopRequireWildcard","obj","__esModule","newObj","_interopRequireDefault","default","_map","_map2","_whatwgFetch","_overlay","_overlay2","$map","document","getElementsByClassName","mapDefaults","center","lat","lng","zoom","el","defaults","getElementById","countryCode","overlay","locationChanged","bind","log","addMarkers","removeMarkers","./map.js","./overlay.js","whatwg-fetch",4,"_classCallCheck","instance","Constructor","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_typeof","Symbol","iterator","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","Map","_EventEmitter","_this","getPrototypeOf","date","Date","now","settings","markers","google","initMap","script","createElement","src","defer","async","appendChild","window","assign","streetViewControl","scrollwheel","maps","geocoder","Geocoder","autocomplete","places","Autocomplete","types","componentRestrictions","country","placeChanged","place","getPlace","updateMap","msg","data","bounds","north","geometry","viewport","R","j","east","south","west","setOptions","rectangle","setBounds","Rectangle","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWeight","marker","Marker","clearMarkers","arr","setMap","_key","events",5,"_policeApi","Overlay","$overlay","$policeData","$yearSelect","$monthSelect","$toggle","policeData","showingData","requestStart","requestEnd","crimes","addEventListener","toggleClick","overlayClick","overlayChange","lastUpdated","err","res","year","parseInt","month","fullDate","setMonth","getMonth","maxDate","getFullYear","classList","add","generateDates","possibleDates","currentDate","keys","$options","endDate","getTime","_year","_month","innerHTML","getElementsByTagName","setMonths","monthToSelect","months","poly","changeData","str","_this2","setTimeout","_this3","requestDiff","category","charAt","substr","mapData","_this4","createPoly","style","transitionDelay","remove","getData","policeDataCallback","contains","getAttribute","parseFloat","latitude","longitude","isYear","toggle","./police-api.js",6,"endpoint"],"mappings":"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","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],2:[function(require,module,exports){\n(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nvar _map = require(\"./map.js\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _whatwgFetch = require(\"whatwg-fetch\");\n\nvar fetchPolyfill = _interopRequireWildcard(_whatwgFetch);\n\nvar _overlay = require(\"./overlay.js\");\n\nvar _overlay2 = _interopRequireDefault(_overlay);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar $map = document.getElementsByClassName(\"map\")[0];\nvar mapDefaults = {\n  center: {\n    lat: 52.3942358,\n    lng: -2.2905\n  },\n  zoom: 7\n};\n\nvar map = new _map2.default({\n  el: $map,\n  defaults: mapDefaults,\n  input: document.getElementById(\"input\"),\n  countryCode: \"GB\"\n});\n\nvar overlay = new _overlay2.default();\n\nmap.on(\"updated\", overlay.locationChanged.bind(overlay));\nmap.on(\"error\", function () {\n  console.log(arguments);\n});\noverlay.on(\"addMarkers\", map.addMarkers.bind(map));\noverlay.on(\"removeMarkers\", map.removeMarkers.bind(map));\n\n},{\"./map.js\":4,\"./overlay.js\":5,\"whatwg-fetch\":2}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = require(\"events\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Map = function (_EventEmitter) {\n  _inherits(Map, _EventEmitter);\n\n  function Map() {\n    _classCallCheck(this, Map);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Map).call(this));\n\n    var date = Date.now();\n    _this.body = document.body;\n    _this.settings = arguments[0];\n    _this.markers = {}; // stores markers\n    if (!((typeof google === \"undefined\" ? \"undefined\" : _typeof(google)) === \"object\" && google.hasOwnProperty(\"maps\"))) {\n      // if no google script\n      var script = document.createElement(\"SCRIPT\");\n      script.src = \"https://maps.googleapis.com/maps/api/js?libraries=places&callback=Map\" + date;\n      script.defer = true;\n      script.async = true;\n      _this.body.appendChild(script);\n\n      window[\"Map\" + date] = _this.initMap.bind(_this);\n    } else {\n      _this.initMap();\n    }\n    return _this;\n  }\n\n  _createClass(Map, [{\n    key: \"initMap\",\n    value: function initMap() {\n      var settings = Object.assign(this.settings.defaults, {\n        streetViewControl: false,\n        scrollwheel: false\n      });\n      //this.settings.defaults.streetViewControl = false;\n\n      this.map = new google.maps.Map(this.settings.el, settings);\n      this.geocoder = new google.maps.Geocoder();\n      this.autocomplete = new google.maps.places.Autocomplete(this.settings.input, {\n        types: [\"(cities)\"],\n        componentRestrictions: {\n          country: this.settings.countryCode\n        }\n      });\n\n      this.autocomplete.addListener(\"place_changed\", this.placeChanged.bind(this));\n      this.emit(\"loaded\");\n    }\n  }, {\n    key: \"placeChanged\",\n    value: function placeChanged() {\n      var place = this.autocomplete.getPlace();\n\n      if (place.hasOwnProperty(\"geometry\")) {\n        this.updateMap(place);\n      } else {\n        this.emit(\"error\", {\n          code: 1,\n          msg: \"No geometry property on place object\",\n          data: place\n        });\n      }\n    }\n  }, {\n    key: \"updateMap\",\n    value: function updateMap(obj) {\n\n      var bounds = {\n        north: obj.geometry.viewport.R.j,\n        east: obj.geometry.viewport.j.R,\n        south: obj.geometry.viewport.R.R,\n        west: obj.geometry.viewport.j.j\n      };\n\n      obj.bounds = bounds;\n\n      this.map.setOptions({\n        center: {\n          lat: obj.geometry.location.lat(),\n          lng: obj.geometry.location.lng()\n        },\n        zoom: 12\n      });\n\n      if (!this.hasOwnProperty(\"rectangle\")) {\n        this.rectangle = new google.maps.Rectangle({\n          bounds: bounds,\n          map: this.map,\n          fillColor: \"#000000\",\n          fillOpacity: 0,\n          strokeColor: \"#FF0000\",\n          strokeOpacity: 0.8,\n          strokeWeight: 2\n        });\n      } else {\n        this.rectangle.setBounds(bounds);\n      }\n\n      this.emit(\"updated\", obj);\n    }\n  }, {\n    key: \"addMarkers\",\n    value: function addMarkers(obj) {\n      var key = obj.key;\n      var data = obj.data;\n\n\n      if (key === \"all\") throw \"can't use the key all\";\n      if (this.markers.hasOwnProperty(key)) throw \"already a property with the key \" + key;\n      this.markers[key] = [];\n\n      data.forEach(function (data) {\n        var lat = data.lat;\n        var lng = data.lng;\n\n        var marker = new google.maps.Marker({\n          position: {\n            lat: lat,\n            lng: lng\n          },\n          map: this.map\n        });\n\n        this.markers[key].push(marker);\n      }.bind(this));\n    }\n  }, {\n    key: \"removeMarkers\",\n    value: function removeMarkers(key) {\n\n      function clearMarkers(arr) {\n        arr.forEach(function (marker) {\n          marker.setMap(null);\n        });\n      }\n\n      if (key === \"all\") {\n        for (var _key in this.markers) {\n          clearMarkers(this.markers[_key]);\n        }\n        this.markers = [];\n      } else {\n        clearMarkers(this.markers[key]);\n        //this.markers[key] = [];\n        delete this.markers[key];\n      }\n    }\n  }]);\n\n  return Map;\n}(_events.EventEmitter);\n\nexports.default = Map;\n;\n\n},{\"events\":1}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = require(\"events\");\n\nvar _policeApi = require(\"./police-api.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Overlay = function (_EventEmitter) {\n  _inherits(Overlay, _EventEmitter);\n\n  function Overlay() {\n    _classCallCheck(this, Overlay);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Overlay).call(this));\n\n    _this.body = document.body;\n    _this.$overlay = document.getElementsByClassName(\"map-overlay\")[0];\n    _this.$policeData = _this.$overlay.getElementsByClassName(\"map-overlay__police-data\")[0];\n    _this.$yearSelect = _this.$overlay.getElementsByClassName(\"map-overlay__year-select\")[0];\n    _this.$monthSelect = _this.$overlay.getElementsByClassName(\"map-overlay__month-select\")[0];\n    _this.$toggle = document.getElementsByClassName(\"map-overlay-toggle\")[0];\n\n    _this.policeData = {\n      showingData: false,\n      requestStart: null,\n      requestEnd: null,\n      crimes: null\n    };\n\n    _this.$toggle.addEventListener(\"click\", _this.toggleClick.bind(_this));\n    _this.$overlay.addEventListener(\"click\", _this.overlayClick.bind(_this));\n    _this.$overlay.addEventListener(\"change\", _this.overlayChange.bind(_this));\n    (0, _policeApi.lastUpdated)(function (err, res) {\n\n      if (!err) {\n        var date = res.date.split(\"-\");\n        var year = parseInt(date[0]);\n        var month = parseInt(date[1]) - 1; // account for 0 based\n        var fullDate = new Date(year, month);\n        fullDate.setMonth(fullDate.getMonth() - 1);\n        this.maxDate = {\n          year: fullDate.getFullYear(),\n          month: fullDate.getMonth()\n        };\n        this.$overlay.classList.add(\"map-overlay--loaded\");\n        this.generateDates();\n      }\n    }.bind(_this));\n    return _this;\n  }\n\n  _createClass(Overlay, [{\n    key: \"generateDates\",\n    value: function generateDates() {\n\n      var possibleDates = {};\n      var currentDate = new Date(2012, 0);\n      var keys = void 0;\n      var year = void 0;\n      var month = void 0;\n      var $options = void 0;\n      var endDate = new Date(this.maxDate.year, this.maxDate.month).getTime();\n\n      while (currentDate.getTime() < endDate) {\n        var _year = currentDate.getFullYear();\n        var _month = currentDate.getMonth() + 1; // change to 1 based\n        if (!possibleDates.hasOwnProperty(_year)) {\n          possibleDates[_year] = [];\n        }\n        possibleDates[_year].push(_month);\n        currentDate.setMonth(currentDate.getMonth() + 1);\n      }\n\n      keys = Object.keys(possibleDates);\n      year = keys[keys.length - 1];\n      month = possibleDates[year];\n      month = month[month.length - 1];\n\n      this.$yearSelect.innerHTML = keys.map(function (key) {\n        return \"<option value=\\\"\" + key + \"\\\">\" + key + \"</option>\";\n      }).join(\"\");\n\n      $options = this.$yearSelect.getElementsByTagName(\"option\");\n      //console.log();\n      this.$yearSelect.value = $options[$options.length - 1].value;\n      this.possibleDates = possibleDates;\n      this.setMonths(year, month);\n      //console.log(month);\n    }\n  }, {\n    key: \"setMonths\",\n    value: function setMonths(year, monthToSelect) {\n      var months = this.possibleDates[year];\n\n      this.$monthSelect.innerHTML = months.map(function (key) {\n        return \"<option value=\\\"\" + key + \"\\\">\" + key + \"</option>\";\n      }).join(\"\");\n\n      if (monthToSelect) {\n        var i = monthToSelect;\n        if (!months[monthToSelect - 1]) {\n          i = 1;\n        }\n        var $months = this.$monthSelect.getElementsByTagName(\"option\");\n        this.$monthSelect.value = i;\n      }\n    }\n  }, {\n    key: \"createPoly\",\n    value: function createPoly(obj) {\n      var north = obj.north;\n      var east = obj.east;\n      var south = obj.south;\n      var west = obj.west;\n\n      var poly = north + \",\" + east + \":\" + south + \",\" + east + \":\" + south + \",\" + west + \":\" + north + \",\" + west;\n      return poly;\n    }\n  }, {\n    key: \"policeDataCallback\",\n    value: function policeDataCallback(err, res) {\n      var _this3 = this;\n\n      function changeData(str) {\n        var _this2 = this;\n\n        this.policeData.showingData = true;\n        this.$policeData.innerHTML = str;\n        setTimeout(function () {\n          // allows opacity transition to work corretly\n          _this2.$policeData.classList.add(\"map-overlay__police-data--show\");\n        }, 50);\n      }\n\n      if (err) {\n        this.emit(\"error\", err);\n      } else {\n        (function () {\n          var crimes = {};\n          var str = \"\";\n          var requestDiff = void 0;\n\n          _this3.policeData.requestEnd = Date.now();\n\n          res.forEach(function (data) {\n            var category = data.category.replace(/-/g, \" \").split(\" \").map(function (text) {\n              return text.charAt(0).toUpperCase() + text.substr(1);\n            }).join(\" \");\n\n            if (!crimes.hasOwnProperty(category)) {\n              crimes[category] = [];\n            }\n            crimes[category].push(data);\n          });\n\n          for (var key in crimes) {\n            str += \"<div class='map-overlay__police-data__section' data-category=\\\"\" + key + \"\\\">\" + crimes[key].length + \" x \" + key + \"</div>\";\n          }\n          str += \"<p>Total: \" + res.length + \"</p>\";\n\n          requestDiff = _this3.policeData.requestEnd - _this3.policeData.requestStart;\n          _this3.policeData.crimes = crimes;\n\n          if (requestDiff < 1000) {\n            setTimeout(function () {\n              changeData.call(_this3, [str]);\n            }, 1000 - requestDiff);\n          } else {\n            changeData.call(_this3, [str]);\n          }\n        })();\n      }\n    }\n  }, {\n    key: \"locationChanged\",\n    value: function locationChanged(mapData) {\n      var _this4 = this;\n\n      var poly = this.createPoly(mapData.bounds);\n      this.policeData.requestStart = Date.now();\n\n      if (this.policeData.showingData === true) {\n\n        this.$policeData.style.transitionDelay = \"0.3s\";\n        setTimeout(function () {\n          _this4.$policeData.classList.remove(\"map-overlay__police-data--show\");\n\n          setTimeout(function () {\n            _this4.$policeData.style.transitionDelay = null;\n          }, 350);\n        }, 50);\n      }\n\n      (0, _policeApi.getData)({\n        poly: poly,\n        date: \"2015-12\",\n        callback: this.policeDataCallback.bind(this)\n      });\n    }\n\n    // event handlers\n    //=====================================================================================\n\n  }, {\n    key: \"overlayClick\",\n    value: function overlayClick(e) {\n      var target = e.target;\n\n\n      if (target.classList.contains(\"map-overlay__police-data__section\")) {\n        var key = target.getAttribute(\"data-category\");\n        if (target.classList.contains(\"map-overlay__police-data__section--active\")) {\n          // remove markers\n          target.classList.remove(\"map-overlay__police-data__section--active\");\n          this.emit(\"removeMarkers\", key);\n        } else {\n          // add markers\n          var crimes = this.policeData.crimes[key].map(function (obj) {\n            return {\n              lat: parseFloat(obj.location.latitude),\n              lng: parseFloat(obj.location.longitude)\n            };\n          });\n          target.classList.add(\"map-overlay__police-data__section--active\");\n          this.emit(\"addMarkers\", {\n            key: key,\n            data: crimes\n          });\n        }\n      }\n    }\n  }, {\n    key: \"overlayChange\",\n    value: function overlayChange(e) {\n      var target = e.target;\n\n      var isYear = target.classList.contains(\"map-overlay__year-select\");\n      var isMonth = target.classList.contains(\"map-overlay__month-select\");\n\n      if (isYear) {\n        this.setMonths(target.value, this.$monthSelect.value);\n      }\n    }\n  }, {\n    key: \"toggleClick\",\n    value: function toggleClick(e) {\n      this.$overlay.classList.toggle(\"map-overlay--show\");\n      e.target.classList.toggle(\"map-overlay-toggle--open\");\n    }\n\n    //=====================================================================================\n\n  }]);\n\n  return Overlay;\n}(_events.EventEmitter);\n\nexports.default = Overlay;\n\n},{\"./police-api.js\":6,\"events\":1}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getData = getData;\nexports.lastUpdated = lastUpdated;\nvar endpoint = \"https://data.police.uk/api/crimes-street/all-crime\";\n\nfunction getData(obj) {\n  var date = obj.date;\n  var poly = obj.poly;\n  var callback = obj.callback;\n\n\n  fetch(endpoint + (\"?poly=\" + poly + \"&date=\" + date)).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    callback(null, data);\n  }).catch(function (err) {\n    callback(err);\n  });\n}\n\nfunction lastUpdated(callback) {\n\n  fetch(\"https://data.police.uk/api/crime-last-updated\").then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    callback(null, data);\n  }).catch(function (err) {\n    callback(err);\n  });\n}\n\n},{}]},{},[3])\n\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import Map from \"./map.js\";\nimport * as fetchPolyfill from \"whatwg-fetch\";\nimport Overlay from \"./overlay.js\";\n\nconst $map = document.getElementsByClassName(\"map\")[0];\nconst mapDefaults = {\n  center: {\n    lat: 52.3942358,\n    lng: -2.2905\n  },\n  zoom: 7\n};\n\nconst map = new Map({\n  el:$map,\n  defaults:mapDefaults,\n  input:document.getElementById(\"input\"),\n  countryCode:\"GB\"\n});\n\nconst overlay = new Overlay();\n\n\nmap.on(\"updated\", overlay.locationChanged.bind(overlay));\nmap.on(\"error\", function() {\n  console.log(arguments);\n})\noverlay.on(\"addMarkers\", map.addMarkers.bind(map));\noverlay.on(\"removeMarkers\", map.removeMarkers.bind(map));\n","import {\n  EventEmitter\n} from \"events\";\n\nexport default class Map extends EventEmitter {\n  constructor() {\n    super();\n    const date = Date.now();\n    this.body = document.body;\n    this.settings = arguments[0];\n    this.markers = {}; // stores markers\n    if (!(typeof google === \"object\" && google.hasOwnProperty(\"maps\"))) { // if no google script\n      const script = document.createElement(\"SCRIPT\");\n      script.src = \"https://maps.googleapis.com/maps/api/js?libraries=places&callback=Map\" + date;\n      script.defer = true;\n      script.async = true;\n      this.body.appendChild(script);\n\n      window[\"Map\" + date] = this.initMap.bind(this);\n    } else {\n      this.initMap();\n    }\n  }\n\n  initMap() {\n    let settings = Object.assign(this.settings.defaults, {\n      streetViewControl:false,\n      scrollwheel:false\n    });\n    //this.settings.defaults.streetViewControl = false;\n\n    this.map = new google.maps.Map(this.settings.el, settings);\n    this.geocoder = new google.maps.Geocoder();\n    this.autocomplete = new google.maps.places.Autocomplete(this.settings.input, {\n      types: [\"(cities)\"],\n      componentRestrictions: {\n        country: this.settings.countryCode\n      }\n    });\n\n    this.autocomplete.addListener(\"place_changed\", this.placeChanged.bind(this));\n    this.emit(\"loaded\");\n  }\n\n\n  placeChanged() {\n    const place = this.autocomplete.getPlace();\n\n    if (place.hasOwnProperty(\"geometry\")) {\n      this.updateMap(place);\n    } else {\n      this.emit(\"error\", {\n        code: 1,\n        msg: \"No geometry property on place object\",\n        data:place\n      });\n    }\n  }\n\n\n  updateMap(obj) {\n\n    const bounds = {\n      north: obj.geometry.viewport.R.j,\n      east: obj.geometry.viewport.j.R,\n      south: obj.geometry.viewport.R.R,\n      west: obj.geometry.viewport.j.j\n    };\n\n    obj.bounds = bounds;\n\n    this.map.setOptions({\n      center: {\n        lat: obj.geometry.location.lat(),\n        lng: obj.geometry.location.lng()\n      },\n      zoom: 12\n    });\n\n    if (!this.hasOwnProperty(\"rectangle\")) {\n      this.rectangle = new google.maps.Rectangle({\n        bounds,\n        map: this.map,\n        fillColor: \"#000000\",\n        fillOpacity: 0,\n        strokeColor: \"#FF0000\",\n        strokeOpacity: 0.8,\n        strokeWeight: 2\n      });\n\n    } else {\n      this.rectangle.setBounds(bounds);\n    }\n\n    this.emit(\"updated\", obj);\n  }\n\n  addMarkers(obj) {\n    const {\n      key,\n      data\n    } = obj;\n\n    if (key === \"all\") throw \"can't use the key all\";\n    if (this.markers.hasOwnProperty(key)) throw \"already a property with the key \" + key;\n    this.markers[key] = [];\n\n    data.forEach(function(data) {\n      const {\n        lat,\n        lng\n      } = data;\n      const  marker = new google.maps.Marker({\n        position:{\n          lat,\n          lng\n        },\n        map: this.map,\n      });\n\n      this.markers[key].push(marker);\n\n    }.bind(this));\n  }\n\n  removeMarkers(key) {\n\n    function clearMarkers(arr) {\n      arr.forEach(function(marker) {\n        marker.setMap(null);\n      });\n    }\n\n    if(key === \"all\"){\n      for (let key in this.markers){\n        clearMarkers(this.markers[key]);\n      }\n      this.markers = [];\n    }\n    else{\n      clearMarkers(this.markers[key]);\n      //this.markers[key] = [];\n      delete this.markers[key];\n    }\n\n  }\n\n};\n","import {\n  EventEmitter\n} from \"events\";\nimport {\n  getData,\n  lastUpdated\n} from \"./police-api.js\";\n\nexport default class Overlay extends EventEmitter {\n  constructor() {\n    super();\n    this.body = document.body;\n    this.$overlay = document.getElementsByClassName(\"map-overlay\")[0];\n    this.$policeData = this.$overlay.getElementsByClassName(\"map-overlay__police-data\")[0];\n    this.$yearSelect = this.$overlay.getElementsByClassName(\"map-overlay__year-select\")[0];\n    this.$monthSelect = this.$overlay.getElementsByClassName(\"map-overlay__month-select\")[0];\n    this.$toggle = document.getElementsByClassName(\"map-overlay-toggle\")[0];\n\n    this.policeData = {\n      showingData: false,\n      requestStart: null,\n      requestEnd: null,\n      crimes: null\n    };\n\n    this.$toggle.addEventListener(\"click\", this.toggleClick.bind(this));\n    this.$overlay.addEventListener(\"click\", this.overlayClick.bind(this));\n    this.$overlay.addEventListener(\"change\", this.overlayChange.bind(this));\n    lastUpdated(function(err, res){\n\n      if(!err){\n        let date = res.date.split(\"-\");\n        let year = parseInt(date[0]);\n        let month = parseInt(date[1]) - 1; // account for 0 based\n        let fullDate = new Date(year, month);\n        fullDate.setMonth(fullDate.getMonth() - 1);\n        this.maxDate = {\n          year:fullDate.getFullYear(),\n          month:fullDate.getMonth()\n        };\n        this.$overlay.classList.add(\"map-overlay--loaded\");\n        this.generateDates();\n\n      }\n\n    }.bind(this));\n  }\n\n  generateDates(){\n\n    let possibleDates = {};\n    let currentDate = new Date(2012, 0);\n    let keys;\n    let year;\n    let month;\n    let $options;\n    const endDate = new Date(this.maxDate.year, this.maxDate.month).getTime();\n\n    while(currentDate.getTime() < endDate){\n      const year = currentDate.getFullYear();\n      const month = currentDate.getMonth() + 1; // change to 1 based\n      if(! possibleDates.hasOwnProperty(year)){\n        possibleDates[year] = [];\n      }\n      possibleDates[year].push(month);\n      currentDate.setMonth(currentDate.getMonth() + 1);\n    }\n\n    keys = Object.keys(possibleDates);\n    year = keys[keys.length -1];\n    month = possibleDates[year];\n    month = month[month.length - 1];\n\n\n    this.$yearSelect.innerHTML = keys.map(function(key) {\n      return `<option value=\"${key}\">${key}</option>`;\n    }).join(\"\");\n\n    $options = this.$yearSelect.getElementsByTagName(\"option\");\n    //console.log();\n    this.$yearSelect.value = $options[$options.length - 1].value;\n    this.possibleDates = possibleDates;\n    this.setMonths(year, month);\n    //console.log(month);\n\n  }\n\n  setMonths(year, monthToSelect){\n    const months = this.possibleDates[year];\n\n    this.$monthSelect.innerHTML = months.map(function(key) {\n      return `<option value=\"${key}\">${key}</option>`;\n    }).join(\"\");\n\n\n    if(monthToSelect){\n      let i = monthToSelect;\n      if(! months[monthToSelect -1]){\n        i = 1;\n      }\n      const $months = this.$monthSelect.getElementsByTagName(\"option\");\n      this.$monthSelect.value = i;\n    }\n\n  }\n\n  createPoly(obj) {\n    const {\n      north,\n      east,\n      south,\n      west\n    } = obj;\n    const poly = `${north},${east}:${south},${east}:${south},${west}:${north},${west}`;\n    return poly;\n  }\n\n  policeDataCallback(err, res) {\n\n    function changeData(str) {\n\n      this.policeData.showingData = true;\n      this.$policeData.innerHTML = str;\n      setTimeout(() => { // allows opacity transition to work corretly\n        this.$policeData.classList.add(\"map-overlay__police-data--show\");\n      }, 50);\n    }\n\n    if (err) {\n      this.emit(\"error\", err)\n    } else {\n      let crimes = {};\n      let str = \"\";\n      let requestDiff;\n\n      this.policeData.requestEnd = Date.now();\n\n      res.forEach(function(data) {\n        let category = data.category.replace(/-/g, \" \")\n          .split(\" \").map(function(text) {\n            return text.charAt(0).toUpperCase() + text.substr(1);\n          }).join(\" \");\n\n        if (!crimes.hasOwnProperty(category)) {\n          crimes[category] = [];\n        }\n        crimes[category].push(data);\n      });\n\n\n      for (let key in crimes) {\n        str += `<div class='map-overlay__police-data__section' data-category=\"${key}\">${crimes[key].length} x ${key}</div>`;\n      }\n      str += `<p>Total: ${res.length}</p>`\n\n      requestDiff = this.policeData.requestEnd - this.policeData.requestStart;\n      this.policeData.crimes = crimes;\n\n      if (requestDiff < 1000) {\n        setTimeout(() => {\n          changeData.call(this, [str]);\n        }, 1000 - requestDiff);\n      } else {\n        changeData.call(this, [str]);\n      }\n\n    }\n  }\n\n\n  locationChanged(mapData) {\n    const poly = this.createPoly(mapData.bounds);\n    this.policeData.requestStart = Date.now();\n\n    if (this.policeData.showingData === true) {\n\n      this.$policeData.style.transitionDelay = \"0.3s\";\n      setTimeout(() => {\n        this.$policeData.classList.remove(\"map-overlay__police-data--show\");\n\n        setTimeout(() => {\n          this.$policeData.style.transitionDelay = null;\n        }, 350);\n\n\n      }, 50);\n\n\n    }\n\n\n    getData({\n      poly,\n      date: \"2015-12\",\n      callback: this.policeDataCallback.bind(this)\n    });\n\n  }\n\n  // event handlers\n  //=====================================================================================\n  overlayClick(e) {\n    const {\n      target\n    } = e;\n\n    if (target.classList.contains(\"map-overlay__police-data__section\")) {\n      let key = target.getAttribute(\"data-category\");\n      if (target.classList.contains(\"map-overlay__police-data__section--active\")) { // remove markers\n        target.classList.remove(\"map-overlay__police-data__section--active\");\n        this.emit(\"removeMarkers\", key);\n      } else { // add markers\n        let crimes = this.policeData.crimes[key].map(function(obj) {\n          return {\n            lat: parseFloat(obj.location.latitude),\n            lng: parseFloat(obj.location.longitude)\n          };\n        });\n        target.classList.add(\"map-overlay__police-data__section--active\");\n        this.emit(\"addMarkers\", {\n          key,\n          data: crimes\n        });\n      }\n\n    }\n\n\n  }\n\n  overlayChange(e){\n    const { target } = e;\n    const isYear = target.classList.contains(\"map-overlay__year-select\");\n    const isMonth  = target.classList.contains(\"map-overlay__month-select\");\n\n\n    if(isYear){\n      this.setMonths(target.value, this.$monthSelect.value);\n    }\n\n  }\n\n  toggleClick(e){\n    this.$overlay.classList.toggle(\"map-overlay--show\");\n    e.target.classList.toggle(\"map-overlay-toggle--open\");\n  }\n\n  //=====================================================================================\n}\n","const endpoint = \"https://data.police.uk/api/crimes-street/all-crime\";\n\nexport function getData(obj) {\n  const { date, poly, callback } = obj;\n\n  fetch(endpoint +`?poly=${poly}&date=${date}`)\n  .then(function(res) {\n    return res.json();\n  })\n  .then(function(data) {\n    callback(null, data);\n  })\n  .catch(function(err) {\n    callback(err);\n  });\n}\n\nexport function lastUpdated(callback){\n\n  fetch(\"https://data.police.uk/api/crime-last-updated\")\n  .then(function(res) {\n    return res.json();\n  })\n  .then(function(data) {\n    callback(null, data);\n  })\n  .catch(function(err) {\n    callback(err);\n  });\n\n}\n"],"sourceRoot":"/"}