{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/es6-promise/dist/es6-promise.js","node_modules/events/events.js","node_modules/function-bind/implementation.js","node_modules/function-bind/index.js","node_modules/object-keys/index.js","node_modules/object-keys/isArguments.js","node_modules/object.assign/hasSymbols.js","node_modules/object.assign/implementation.js","node_modules/object.assign/polyfill.js","node_modules/process/browser.js","node_modules/whatwg-fetch/fetch.js","src/js/main.js","src/js/map.js","src/js/overlay.js","src/js/police-api.js","src/js/popup.js"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC17BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrYA;;;;AACA;;;;;;AAEA,QAAQ,aAAR,EAAuB,QAAvB;;AAKA,IAAM,OAAO,SAAS,sBAAT,CAAgC,KAAhC,EAAuC,CAAvC,CAAP;AACN,IAAM,SAAS,SAAS,cAAT,CAAwB,OAAxB,CAAT;AACN,IAAM,cAAc;AAClB,UAAQ;AACN,SAAK,UAAL;AACA,SAAK,CAAC,MAAD;GAFP;AAIA,QAAM,CAAN;CALI;;AAQN,IAAM,MAAM,kBAAQ;AAClB,MAAG,IAAH;AACA,YAAS,WAAT;AACA,SAAM,MAAN;AACA,eAAY,IAAZ;CAJU,CAAN;;AAON,IAAM,UAAU,sBAAY,GAAZ,CAAV;;AAEN,OAAO,KAAP,GAAe,EAAf;;;;;;;;;;;;;AC3BA;;AAIA;;;;AACA;;;;;;;;;;;;AAEA,IAAM,SAAS,yBAAT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","file":"main.min.js","sourceRoot":"/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.1.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n      var state = parent._state;\n\n      if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n        return this;\n      }\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n      var result = parent._result;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (Array.isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","var implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\n// modified from https://github.com/es-shims/es5-shim\nvar has = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\nvar hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString');\nvar hasProtoEnumBug = function () {}.propertyIsEnumerable('prototype');\nvar dontEnums = [\n\t'toString',\n\t'toLocaleString',\n\t'valueOf',\n\t'hasOwnProperty',\n\t'isPrototypeOf',\n\t'propertyIsEnumerable',\n\t'constructor'\n];\nvar equalsConstructorPrototype = function (o) {\n\tvar ctor = o.constructor;\n\treturn ctor && ctor.prototype === o;\n};\nvar blacklistedKeys = {\n\t$console: true,\n\t$frame: true,\n\t$frameElement: true,\n\t$frames: true,\n\t$parent: true,\n\t$self: true,\n\t$webkitIndexedDB: true,\n\t$webkitStorageInfo: true,\n\t$window: true\n};\nvar hasAutomationEqualityBug = (function () {\n\t/* global window */\n\tif (typeof window === 'undefined') { return false; }\n\tfor (var k in window) {\n\t\ttry {\n\t\t\tif (!blacklistedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\ttry {\n\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}());\nvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t/* global window */\n\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\treturn equalsConstructorPrototype(o);\n\t}\n\ttry {\n\t\treturn equalsConstructorPrototype(o);\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar keysShim = function keys(object) {\n\tvar isObject = object !== null && typeof object === 'object';\n\tvar isFunction = toStr.call(object) === '[object Function]';\n\tvar isArguments = isArgs(object);\n\tvar isString = isObject && toStr.call(object) === '[object String]';\n\tvar theKeys = [];\n\n\tif (!isObject && !isFunction && !isArguments) {\n\t\tthrow new TypeError('Object.keys called on a non-object');\n\t}\n\n\tvar skipProto = hasProtoEnumBug && isFunction;\n\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\ttheKeys.push(String(i));\n\t\t}\n\t}\n\n\tif (isArguments && object.length > 0) {\n\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\ttheKeys.push(String(j));\n\t\t}\n\t} else {\n\t\tfor (var name in object) {\n\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\ttheKeys.push(String(name));\n\t\t\t}\n\t\t}\n\t}\n\n\tif (hasDontEnumBug) {\n\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t}\n\t\t}\n\t}\n\treturn theKeys;\n};\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\treturn (Object.keys(arguments) || '').length === 2;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tvar originalKeys = Object.keys;\n\t\t\tObject.keys = function keys(object) {\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t} else {\n\t\t\t\t\treturn originalKeys(object);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keys = require('object-keys');\n\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tif (typeof sym === 'string') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(Object(sym) instanceof Symbol)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; }\n\tif (keys(obj).length !== 0) { return false; }\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\n// modified from https://github.com/es-shims/es6-shim\nvar keys = require('object-keys');\nvar bind = require('function-bind');\nvar canBeObject = function (obj) {\n\treturn typeof obj !== 'undefined' && obj !== null;\n};\nvar hasSymbols = require('./hasSymbols')();\nvar toObject = Object;\nvar push = bind.call(Function.call, Array.prototype.push);\nvar propIsEnumerable = bind.call(Function.call, Object.prototype.propertyIsEnumerable);\n\nmodule.exports = function assign(target, source1) {\n\tif (!canBeObject(target)) { throw new TypeError('target must be an object'); }\n\tvar objTarget = toObject(target);\n\tvar s, source, i, props, syms, value, key;\n\tfor (s = 1; s < arguments.length; ++s) {\n\t\tsource = toObject(arguments[s]);\n\t\tprops = keys(source);\n\t\tif (hasSymbols && Object.getOwnPropertySymbols) {\n\t\t\tsyms = Object.getOwnPropertySymbols(source);\n\t\t\tfor (i = 0; i < syms.length; ++i) {\n\t\t\t\tkey = syms[i];\n\t\t\t\tif (propIsEnumerable(source, key)) {\n\t\t\t\t\tpush(props, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (i = 0; i < props.length; ++i) {\n\t\t\tkey = props[i];\n\t\t\tvalue = source[key];\n\t\t\tif (propIsEnumerable(source, key)) {\n\t\t\t\tobjTarget[key] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn objTarget;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar lacksProperEnumerationOrder = function () {\n\tif (!Object.assign) {\n\t\treturn false;\n\t}\n\t// v8, specifically in node 4.x, has a bug with incorrect property enumeration order\n\t// note: this does not detect the bug unless there's 20 characters\n\tvar str = 'abcdefghijklmnopqrst';\n\tvar letters = str.split('');\n\tvar map = {};\n\tfor (var i = 0; i < letters.length; ++i) {\n\t\tmap[letters[i]] = letters[i];\n\t}\n\tvar obj = Object.assign({}, map);\n\tvar actual = '';\n\tfor (var k in obj) {\n\t\tactual += k;\n\t}\n\treturn str !== actual;\n};\n\nvar assignHasPendingExceptions = function () {\n\tif (!Object.assign || !Object.preventExtensions) {\n\t\treturn false;\n\t}\n\t// Firefox 37 still has \"pending exception\" logic in its Object.assign implementation,\n\t// which is 72% slower than our shim, and Firefox 40's native implementation.\n\tvar thrower = Object.preventExtensions({ 1: 2 });\n\ttry {\n\t\tObject.assign(thrower, 'xy');\n\t} catch (e) {\n\t\treturn thrower[1] === 'y';\n\t}\n};\n\nmodule.exports = function getPolyfill() {\n\tif (!Object.assign) {\n\t\treturn implementation;\n\t}\n\tif (lacksProperEnumerationOrder()) {\n\t\treturn implementation;\n\t}\n\tif (assignHasPendingExceptions()) {\n\t\treturn implementation;\n\t}\n\treturn Object.assign;\n};\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import Map from \"./map.js\";\r\nimport Overlay from  \"./overlay.js\";\r\n\r\nrequire('es6-promise').polyfill();\r\n\r\n\r\n\r\n\r\nconst $map = document.getElementsByClassName(\"map\")[0];\r\nconst $input = document.getElementById(\"input\");\r\nconst mapDefaults = {\r\n  center: {\r\n    lat: 52.3942358,\r\n    lng: -2.2905\r\n  },\r\n  zoom: 7\r\n};\r\n\r\nconst map = new Map({\r\n  el:$map,\r\n  defaults:mapDefaults,\r\n  input:$input,\r\n  countryCode:\"GB\"\r\n});\r\n\r\nconst overlay = new Overlay(map);\r\n\r\n$input.value = \"\"; // fixed bug with firefox\r\n","import {\r\n  EventEmitter\r\n} from \"events\";\r\n\r\nimport Assign from \"object.assign/polyfill\";\r\nimport alert from \"./popup.js\";\r\n\r\nconst assign = Assign();\r\n\r\nexport default class Map extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    const date = Date.now();\r\n    this.body = document.body;\r\n    this.settings = arguments[0];\r\n    this.markers = {}; // stores markers\r\n    this.previousSettings = {\r\n      bounds: {\r\n        north: null,\r\n        east: null,\r\n        south: null,\r\n        west: null\r\n      },\r\n      lat: null,\r\n      lng: null\r\n    };\r\n\r\n    if (!(typeof google === \"object\" && google.hasOwnProperty(\"maps\"))) { // if no google script\r\n      const script = document.createElement(\"SCRIPT\");\r\n      script.src = \"https://maps.googleapis.com/maps/api/js?libraries=places&callback=Map\" + date;\r\n      script.defer = true;\r\n      script.async = true;\r\n      this.body.appendChild(script);\r\n\r\n      window[\"Map\" + date] = this.initMap.bind(this);\r\n    } else {\r\n      this.initMap();\r\n    }\r\n  }\r\n\r\n  initMap() {\r\n    let settings = assign(this.settings.defaults, {\r\n      streetViewControl: false,\r\n    });\r\n    //this.settings.defaults.streetViewControl = false;\r\n\r\n    this.map = new google.maps.Map(this.settings.el, settings);\r\n    this.geocoder = new google.maps.Geocoder();\r\n    this.autocomplete = new google.maps.places.Autocomplete(this.settings.input, {\r\n      types: [\"(cities)\"],\r\n      componentRestrictions: {\r\n        country: this.settings.countryCode\r\n      }\r\n    });\r\n\r\n    this.autocomplete.addListener(\"place_changed\", this.placeChanged.bind(this));\r\n    this.emit(\"loaded\");\r\n  }\r\n\r\n\r\n  placeChanged() {\r\n    const place = this.autocomplete.getPlace();\r\n\r\n    if (place.hasOwnProperty(\"geometry\")) {\r\n      //this.updateMap(place);\r\n      this.emit(\"gotPlace\", place);\r\n    } else {\r\n      this.emit(\"error\", {\r\n        code: 1,\r\n        msg: \"No geometry property on place object\",\r\n        data: place\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  updateMap(obj) {\r\n\r\n    if(obj !== null){\r\n\r\n    const bounds = {\r\n      north: obj.geometry.viewport.R.j,\r\n      east: obj.geometry.viewport.j.R,\r\n      south: obj.geometry.viewport.R.R,\r\n      west: obj.geometry.viewport.j.j\r\n    };\r\n\r\n    const lat = obj.geometry.location.lat();\r\n    const lng = obj.geometry.location.lng();\r\n\r\n    const { north, east, south, west } = bounds;\r\n\r\n\r\n\r\n    obj.bounds = bounds;\r\n\r\n    if (this.previousSettings.lat !== lat && this.previousSettings.lng !== lng) {\r\n      this.previousSettings.lat = lat;\r\n      this.previousSettings.lng = lng;\r\n\r\n      this.map.setOptions({\r\n        center: {\r\n          lat: obj.geometry.location.lat(),\r\n          lng: obj.geometry.location.lng()\r\n        },\r\n        zoom: 12\r\n      });\r\n    }\r\n\r\n    if (!this.hasOwnProperty(\"rectangle\")) {\r\n      this.rectangle = new google.maps.Rectangle({\r\n        bounds,\r\n        map: this.map,\r\n        fillColor: \"#000000\",\r\n        fillOpacity: 0,\r\n        strokeColor: \"#e64c4c\",\r\n        strokeOpacity: 0.8,\r\n        strokeWeight: 2\r\n      });\r\n\r\n    } else if(north !== this.previousSettings.bounds.north, east !== this.previousSettings.bounds.east, south !== this.previousSettings.bounds.south, west !== this.previousSettings.bounds.west) {\r\n      this.previousSettings.bounds = {\r\n        north,\r\n        east,\r\n        south,\r\n        west\r\n      }\r\n      this.rectangle.setBounds(bounds);\r\n    }\r\n\r\n    this.emit(\"updated\", obj);\r\n  }\r\n  else{\r\n    alert(\"Try reselecting the place you wish to see data for.\")\r\n  }\r\n  }\r\n\r\n  addMarkers(obj) {\r\n    const {\r\n      key,\r\n      data\r\n    } = obj;\r\n\r\n    if (key === \"all\") throw \"can't use the key all\";\r\n    if (this.markers.hasOwnProperty(key)) throw \"already a property with the key \" + key;\r\n    this.markers[key] = [];\r\n\r\n    data.forEach(function(data) {\r\n      const {\r\n        lat,\r\n        lng\r\n      } = data;\r\n      const marker = new google.maps.Marker({\r\n        position: {\r\n          lat,\r\n          lng\r\n        },\r\n        map: this.map,\r\n        //icon:\"/images/location.svg\",\r\n        //animation:google.maps.Animation.DROP\r\n\r\n      });\r\n\r\n      this.markers[key].push(marker);\r\n\r\n    }.bind(this));\r\n  }\r\n\r\n  removeMarkers(key) {\r\n\r\n    function clearMarkers(arr) {\r\n      arr.forEach(function(marker) {\r\n        marker.setMap(null);\r\n      });\r\n    }\r\n\r\n    if (key === \"all\") {\r\n      for (let key in this.markers) {\r\n        clearMarkers(this.markers[key]);\r\n      }\r\n      this.markers = [];\r\n    } else {\r\n      clearMarkers(this.markers[key]);\r\n      //this.markers[key] = [];\r\n      delete this.markers[key];\r\n    }\r\n\r\n  }\r\n\r\n};\r\n","import {\r\n  EventEmitter\r\n} from \"events\";\r\nimport {\r\n  getData,\r\n  lastUpdated\r\n} from \"./police-api.js\";\r\n\r\nimport alert from \"./popup.js\";\r\n\r\nexport default class Overlay extends EventEmitter {\r\n  constructor(map) {\r\n\r\n    super();\r\n    this.map = map;\r\n    this.mapData = {\r\n      place: null,\r\n      poly:null\r\n    };\r\n    this.el = {\r\n      $place:null,\r\n      $overlay: null,\r\n      $submit: null,\r\n      $year: null,\r\n      $month: null,\r\n      $policeData:null\r\n    }\r\n    this.eventFns = {\r\n      click: [],\r\n      change: []\r\n    }\r\n    this.possibleDates = null;\r\n    this.loading = false;\r\n    this.maxDate = null;\r\n    this.policeData = {\r\n      requestEnd:null,\r\n      requestStart:null,\r\n      crimes:null\r\n    }\r\n    this.overlay = {\r\n      isOpen:false,\r\n      requestStart:null,\r\n      requestEnd:null,\r\n      isClosing:false\r\n    };\r\n\r\n    lastUpdated(function(err, obj) {\r\n      if (!err) {\r\n        let date = obj.date.split(\"-\").slice(0, 2);\r\n        date = new Date(date[0], date[1] - 1);\r\n        this.maxDate = date.getTime();\r\n        this.init();\r\n      }\r\n    }.bind(this));\r\n\r\n  }\r\n\r\n\r\n\r\n  generateDates() {\r\n\r\n    let possibleDates = {};\r\n    let currentDate = new Date(2012, 0);\r\n    let keys;\r\n    let year;\r\n    let month;\r\n    let $options;\r\n    const endDate = this.maxDate;\r\n\r\n    while (currentDate.getTime() < endDate) {\r\n      const year = currentDate.getFullYear();\r\n      const month = currentDate.getMonth() + 1; // change to 1 based\r\n      if (!possibleDates.hasOwnProperty(year)) {\r\n        possibleDates[year] = [];\r\n      }\r\n      possibleDates[year].push(month);\r\n      currentDate.setMonth(currentDate.getMonth() + 1);\r\n    }\r\n\r\n    keys = Object.keys(possibleDates);\r\n    year = keys[keys.length - 1];\r\n    month = possibleDates[year];\r\n    month = month[month.length - 1];\r\n\r\n\r\n    this.el.$year.innerHTML = keys.map(function(key) {\r\n      return `<option value=\"${key}\">${key}</option>`;\r\n    }).join(\"\");\r\n\r\n    $options = this.el.$year.getElementsByTagName(\"option\");\r\n    this.el.$year.value = $options[$options.length - 1].value;\r\n    this.possibleDates = possibleDates;\r\n    this.setMonths(year, month);\r\n    this.currentDate = year + \"-\" + month;\r\n  }\r\n\r\n  setMonths(year, monthToSelect) {\r\n    const months = this.possibleDates[year];\r\n\r\n    this.el.$month.innerHTML = months.map(function(key) {\r\n      return `<option value=\"${key}\">${key}</option>`;\r\n    }).join(\"\");\r\n\r\n\r\n    if (monthToSelect) {\r\n      let i = monthToSelect;\r\n      if (!months[monthToSelect - 1]) {\r\n        i = 1;\r\n      }\r\n      const $months = this.el.$month.getElementsByTagName(\"option\");\r\n      this.el.$month.value = i;\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  gotPlace(place) {\r\n    this.mapData.place = place;\r\n    this.mapData.poly = this.createPoly(place.geometry.viewport.R.j,place.geometry.viewport.j.R,place.geometry.viewport.R.R,place.geometry.viewport.j.j);\r\n  }\r\n\r\n  mapError() {\r\n    console.log(\"map error\");\r\n    console.log(arguments);\r\n    alert(\"An Unknown Error Occoured\");\r\n  }\r\n\r\n  policeDataFn(err, res){\r\n    function changeData(str) {\r\n\r\n      this.el.$policeData.innerHTML = str;\r\n      setTimeout(() => { // allows opacity transition to work corretly\r\n        this.el.$policeData.classList.add(\"map-overlay__police-data--show\");\r\n        this.overlay.isOpen = true;\r\n      }, 0);\r\n    }\r\n\r\n\r\n    if (err || res.hasOwnProperty(\"status\")) {\r\n\r\n      if(res.status == 503){\r\n        alert(\"More than 10,000 crimes in this area, please select a smaller area.\");\r\n      }\r\n      else{\r\n        alert(\"An Unknown Error Occoured\");\r\n      }\r\n\r\n    } else {\r\n      let crimes = {};\r\n      let str = \"\";\r\n      let requestDiff;\r\n\r\n      this.policeData.requestEnd = Date.now();\r\n\r\n      res.forEach(function(data) {\r\n        let category = data.category.replace(/-/g, \" \")\r\n          .split(\" \").map(function(text) {\r\n            return text.charAt(0).toUpperCase() + text.substr(1);\r\n          }).join(\" \");\r\n\r\n        if (!crimes.hasOwnProperty(category)) {\r\n          crimes[category] = [];\r\n        }\r\n        crimes[category].push(data);\r\n      });\r\n\r\n\r\n      for (let key in crimes) {\r\n        str += `<div class='map-overlay__police-data__section' data-category=\"${key}\">${crimes[key].length} x ${key}</div>`;\r\n      }\r\n      str += `<p class=\"map-overlay__police-data__total\">Total: ${res.length}</p>`\r\n\r\n      requestDiff = this.policeData.requestEnd - this.policeData.requestStart;\r\n      this.policeData.crimes = crimes;\r\n\r\n\r\n      if(this.overlay.isClosing === false){\r\n        changeData.call(this, [str]);\r\n      }\r\n      else{\r\n        this.once(\"OVERLAY-CLOSED\", function() {\r\n          changeData.call(this, [str]);\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n   createPoly(north, east, south, west) {\r\n    const poly = `${north},${east}:${south},${east}:${south},${west}:${north},${west}`;\r\n    return poly;\r\n  }\r\n\r\n  submitClick() {\r\n    if (this.el.$place.value.trim() === \"\") {\r\n      alert(\"Please select a valid place\");\r\n    } else {\r\n      const formattedDate = this.el.$year.value + \"-\" + this.el.$month.value;\r\n      this.el.$submit.classList.add(\"map-overlay__button--loading\");\r\n      this.map.updateMap(this.mapData.place);\r\n      this.loading = true;\r\n      this.policeData.requestStart = Date.now();\r\n\r\n      if(this.overlay.isOpen){\r\n        this.closeOverlay();\r\n      }\r\n\r\n\r\n      getData({\r\n        poly:this.mapData.poly,\r\n        date:formattedDate,\r\n        callback:this.policeDataFn.bind(this)\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  closeOverlay(){\r\n    this.map.removeMarkers(\"all\");\r\n    this.overlay.isClosing = true;\r\n    this.el.$policeData.classList.add(\"map-overlay__police-data--closing\");\r\n    this.el.$policeData.style.transitionDelay = \"0.1s\";\r\n    setTimeout(()=> {\r\n      this.el.$policeData.classList.remove(\"map-overlay__police-data--show\");\r\n    },0);\r\n\r\n    setTimeout(()=> {\r\n        this.el.$policeData.style.transitionDelay = null;\r\n        this.el.$policeData.classList.remove(\"map-overlay__police-data--closing\");\r\n\r\n        setTimeout(()=>{\r\n          this.overlay.isOpen = false;\r\n          this.overlay.isClosing = false;\r\n          this.emit(\"OVERLAY-CLOSED\");\r\n\r\n        },400);\r\n\r\n    },100);\r\n\r\n  }\r\n\r\n  dataClick(target){\r\n    let key = target.getAttribute(\"data-category\");\r\n    if (target.classList.contains(\"map-overlay__police-data__section--active\")) { // remove markers\r\n      target.classList.remove(\"map-overlay__police-data__section--active\");\r\n      this.map.removeMarkers(key);\r\n    } else { // add markers\r\n      let crimes = this.policeData.crimes[key].map(function(obj) {\r\n        return {\r\n          lat: parseFloat(obj.location.latitude),\r\n          lng: parseFloat(obj.location.longitude)\r\n        };\r\n      });\r\n      target.classList.add(\"map-overlay__police-data__section--active\");\r\n      this.map.addMarkers({\r\n        key,\r\n        data: crimes\r\n      });\r\n    }\r\n  }\r\n\r\n  yearChange() {\r\n    const year = this.el.$year.value;\r\n    const month = this.el.$month.value\r\n    this.setMonths(year, month);\r\n  }\r\n\r\n  // one main eventHandler function\r\n  eventHandler(root, e) {\r\n\r\n    let {\r\n      target\r\n    } = e;\r\n    const oTarget = target;\r\n    const fns = this.eventFns[e.type];\r\n    const _ = this;\r\n\r\n    if (Array.isArray(fns)) {\r\n      fns.forEach(function(obj) {\r\n        let found = false;\r\n        target = oTarget;\r\n\r\n        while (!found && target !== root) {\r\n\r\n          if(typeof obj.el === \"string\"){\r\n\r\n            if(target.classList.contains(obj.el)){\r\n              found = true;\r\n            }\r\n            else{\r\n              target = target.parentElement;\r\n            }\r\n          }\r\n          else{\r\n            if (target === obj.el) {\r\n              found = true;\r\n            } else {\r\n              target = target.parentElement;\r\n            }\r\n          }\r\n\r\n        }\r\n\r\n\r\n        if (found) {\r\n          obj.fn.call(_, target);\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n  }\r\n\r\n  toggleClick(e){\r\n    this.el.$toggle.classList.toggle(\"map-overlay-toggle--open\");\r\n    this.el.$overlay.classList.toggle(\"map-overlay--show\");\r\n  }\r\n\r\n  init() {\r\n    this.el.$overlay = document.getElementsByClassName(\"map-overlay\")[0];\r\n    this.el.$submit = this.el.$overlay.getElementsByClassName(\"map-overlay__button\")[0];\r\n    this.el.$place = this.el.$overlay.getElementsByClassName(\"map-overlay__input\")[0];\r\n    this.el.$year = this.el.$overlay.getElementsByClassName(\"map-overlay__year-select\")[0];\r\n    this.el.$month = this.el.$overlay.getElementsByClassName(\"map-overlay__month-select\")[0];\r\n    this.el.$policeData = this.el.$overlay.getElementsByClassName(\"map-overlay__police-data\")[0];\r\n    this.el.$toggle = document.getElementsByClassName(\"map-overlay-toggle\")[0];\r\n\r\n    this.generateDates();\r\n\r\n    this.map\r\n      .on(\"gotPlace\", this.gotPlace.bind(this))\r\n      .on(\"error\", this.mapError.bind(this));\r\n\r\n\r\n    this.el.$toggle.addEventListener(\"click\", this.toggleClick.bind(this));\r\n\r\n    // trying something new with event handlers - don't hate\r\n    this.el.$overlay.addEventListener(\"click\", this.eventHandler.bind(this, this.el.$overlay));\r\n    this.el.$overlay.addEventListener(\"change\", this.eventHandler.bind(this, this.el.$overlay));\r\n\r\n    this.eventFns.change.push({\r\n      el: this.el.$year,\r\n      fn: this.yearChange\r\n    });\r\n\r\n    this.eventFns.click.push({\r\n      el: this.el.$submit,\r\n      fn: this.submitClick\r\n    });\r\n\r\n    this.eventFns.click.push({\r\n      el:\"map-overlay__police-data__section\",\r\n      fn:this.dataClick\r\n    })\r\n\r\n\r\n\r\n    this.el.$overlay.classList.add(\"map-overlay--show\");\r\n  }\r\n\r\n\r\n\r\n}\r\n","import 'whatwg-fetch';\r\n\r\nconst endpoint = \"https://data.police.uk/api/crimes-street/all-crime\";\r\n\r\nexport function getData(obj) {\r\n  const { date, poly, callback } = obj;\r\n\r\n  fetch(endpoint +`?poly=${poly}&date=${date}`)\r\n  .then(function(res) {\r\n    if(res.status === 200){\r\n      return res.json();\r\n    }\r\n    else{\r\n      return {\r\n        status:res.status,\r\n        statusText:res.statusText\r\n      }\r\n    }\r\n  })\r\n  .then(function(data) {\r\n    callback(null, data);\r\n  })\r\n  .catch(function(err) {\r\n    callback(err);\r\n  });\r\n}\r\n\r\nexport function lastUpdated(callback){\r\n\r\n  fetch(\"https://data.police.uk/api/crime-last-updated\")\r\n  .then(function(res) {\r\n    return res.json();\r\n  })\r\n  .then(function(data) {\r\n    callback(null, data);\r\n  })\r\n  .catch(function(err) {\r\n    callback(err);\r\n  });\r\n\r\n}\r\n","const body = document.body;\r\nconst $alert = document.createElement(\"DIV\");\r\nconst $alertContainer = document.createElement(\"DIV\");\r\nconst $alertClose = document.createElement(\"BUTTON\");\r\nconst $alertContent = document.createElement(\"DIV\");\r\n\r\n$alertContainer.classList.add(\"alert__container\");\r\n$alertClose.classList.add(\"alert__close\");\r\n$alertClose.addEventListener(\"click\", close);\r\n$alertContent.classList.add(\"alert__content\");\r\n$alertClose.innerHTML = \"Close\";\r\n\r\n$alert.classList.add(\"alert\");\r\n$alert.appendChild($alertContainer);\r\n$alertContainer.appendChild($alertClose);\r\n$alertContainer.appendChild($alertContent);\r\n\r\nbody.appendChild($alert);\r\n\r\nfunction close() {\r\n  body.classList.remove(\"alert--open\");\r\n}\r\n\r\nfunction open() {\r\n  body.classList.add(\"alert--open\");\r\n}\r\n\r\nexport default function alert(msg){\r\n  $alertContent.innerHTML = msg;\r\n  setTimeout(function() {\r\n    open();\r\n  },0);\r\n}\r\n"]}